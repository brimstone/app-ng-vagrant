#!/bin/sh
echo '$*:' "$*" >> /tmp/ssh.log
case "$1" in
	"")
		exit
	;;
	"bash")
		while read -r aline; do
			echo "$aline" >> /tmp/ssh.log
			case "$aline" in
			"exit")
				exit
			;;
			"echo; printf /vagrant")
				echo
				printf "/vagrant"
			;;
			*)
			;;
			esac
		done
	;;
	"scp")
		char=""
		while char=$(dd bs=1 count=1); do
			[ "$char" = $'\n' ] && exit
			printf "%s" "$char" >> /tmp/ssh.log
		done
	;;
esac
